@model E_Commerce_Platform_Ass1.Data.Database.Entities.Shop
@using E_Commerce_Platform_Ass1.Service.DTOs
@{
    ViewData["Title"] = Model.ShopName;
    Layout = "~/Views/Shared/_EShopperLayout.cshtml";
    var products = ViewBag.Products as List<ProductDto> ?? new List<ProductDto>();
}

<!-- Page Header Start -->
<div class="container-fluid bg-secondary mb-5">
    <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 300px">
        <h1 class="font-weight-semi-bold text-uppercase mb-3">@Model.ShopName</h1>
        <div class="d-inline-flex">
            <p class="m-0"><a asp-controller="Home" asp-action="Index">Home</a></p>
            <p class="m-0 px-2">-</p>
            <p class="m-0">Shop</p>
            <p class="m-0 px-2">-</p>
            <p class="m-0">@Model.ShopName</p>
        </div>
    </div>
</div>
<!-- Page Header End -->

<!-- Shop Info Start -->
<div class="container-fluid py-5">
    <div class="row px-xl-5">
        <!-- Shop Information Section -->
        <div class="col-lg-12 mb-5">
            <div class="bg-light p-4 rounded shadow-sm">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center mr-4" style="width: 100px; height: 100px;">
                        <i class="fas fa-store text-white" style="font-size: 3rem;"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h2 class="font-weight-semi-bold mb-2">@Model.ShopName</h2>
                        <p class="text-muted mb-2">
                            <i class="fas fa-calendar-alt text-primary mr-2"></i>
                            Established: @Model.CreatedAt.ToString("MMMM dd, yyyy")
                        </p>
                        <span class="badge badge-success badge-lg p-2">
                            <i class="fas fa-check-circle mr-2"></i>Verified Shop
                        </span>
                    </div>
                </div>
                
                <hr class="my-4">
                
                <div class="row">
                    <div class="col-md-12">
                        <h5 class="font-weight-semi-bold mb-3">
                            <i class="fas fa-info-circle text-primary mr-2"></i>About This Shop
                        </h5>
                        <p class="text-muted">@Model.Description</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div class="col-lg-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="font-weight-semi-bold">
                    <i class="fas fa-box text-primary mr-2"></i>Products (@products.Count)
                </h3>
            </div>

            @if (products.Any())
            {
                <div class="row">
                    @foreach (var product in products)
                    {
                        <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                            <div class="product-item bg-light mb-4">
                                <div class="product-img position-relative overflow-hidden">
                                    <img class="img-fluid w-100" src="@(!string.IsNullOrEmpty(product.ImageUrl) ? product.ImageUrl : "~/img/product-1.jpg")" alt="@product.Name" style="height: 250px; object-fit: cover;">
                                    <div class="product-action">
                                        <a class="btn btn-outline-dark btn-square" href="#"><i class="fa fa-shopping-cart"></i></a>
                                        <a class="btn btn-outline-dark btn-square" href="#"><i class="far fa-heart"></i></a>
                                        <a class="btn btn-outline-dark btn-square" asp-controller="Product" asp-action="Detail" asp-route-id="@product.Id"><i class="fa fa-search"></i></a>
                                    </div>
                                </div>
                                <div class="text-center py-4">
                                    <a class="h6 text-decoration-none text-truncate" href="#">@product.Name</a>
                                    <div class="d-flex align-items-center justify-content-center mt-2">
                                        <h5 class="text-primary mr-2">$@product.BasePrice.ToString("F2")</h5>
                                    </div>
                                    <div class="d-flex align-items-center justify-content-center mb-1">
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            if (i <= Math.Round(product.AvgRating))
                                            {
                                                <small class="fa fa-star text-primary mr-1"></small>
                                            }
                                            else
                                            {
                                                <small class="far fa-star text-primary mr-1"></small>
                                            }
                                        }
                                        <small>(@product.AvgRating.ToString("F1"))</small>
                                    </div>
                                    @if (!string.IsNullOrEmpty(product.CategoryName))
                                    {
                                        <small class="text-muted">
                                            <i class="fas fa-tag mr-1"></i>@product.CategoryName
                                        </small>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
            else
            {
                <div class="text-center py-5">
                    <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
                    <h5 class="text-muted">No products available</h5>
                    <p class="text-muted">This shop hasn't added any products yet.</p>
                </div>
            }
        </div>
    </div>
</div>
<!-- Shop Info End -->
